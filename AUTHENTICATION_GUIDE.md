# GIIP è®¤è¯ç³»ç»Ÿå®Œæ•´æŒ‡å—

## âœ… ç³»ç»ŸçŠ¶æ€

æ‰€æœ‰æœåŠ¡è¿è¡Œæ­£å¸¸ï¼š
- âœ… å‰ç«¯ (Nginx): http://localhost
- âœ… åç«¯ API (Node.js): http://localhost:3000
- âœ… æ•°æ®åº“ (PostgreSQL): localhost:5432

## ğŸ” æµ‹è¯•è´¦å·

ç³»ç»Ÿé¢„è®¾äº†ä»¥ä¸‹æµ‹è¯•è´¦å·ï¼š

| é‚®ç®± | å¯†ç  | è§’è‰² | æƒé™ |
|------|------|------|------|
| `admin@giip.info` | `Password123!` | admin | å®Œå…¨è®¿é—®æƒé™ |
| `editor@giip.info` | `Password123!` | editor | å†…å®¹ç¼–è¾‘æƒé™ |
| `user@giip.info` | `Password123!` | user | åªè¯»æƒé™ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è®¿é—®å‰ç«¯

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost

### 2. ç™»å½•

1. ç‚¹å‡»å³ä¸Šè§’çš„ **"Login"** æŒ‰é’®
2. è¾“å…¥é‚®ç®±ï¼š`admin@giip.info`
3. è¾“å…¥å¯†ç ï¼š`Password123!`
4. ç‚¹å‡» **"Login"**

### 3. æ³¨å†Œæ–°ç”¨æˆ·

1. ç‚¹å‡»å³ä¸Šè§’çš„ **"Register"** æŒ‰é’®
2. è¾“å…¥é‚®ç®±ï¼ˆä¾‹å¦‚ï¼š`yourname@giip.info`ï¼‰
3. è¾“å…¥å¯†ç ï¼ˆè‡³å°‘ 6 ä¸ªå­—ç¬¦ï¼‰
4. ç¡®è®¤å¯†ç 
5. ç‚¹å‡» **"Create Account"**

## ğŸ“‹ åŠŸèƒ½æ¸…å•

### âœ… å·²å®ç°åŠŸèƒ½

- [x] ç”¨æˆ·æ³¨å†Œ
- [x] ç”¨æˆ·ç™»å½•
- [x] JWT Token è®¤è¯
- [x] ç™»å½•çŠ¶æ€æŒä¹…åŒ–
- [x] ç”¨æˆ·ç™»å‡º
- [x] å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
- [x] è¡¨å•éªŒè¯
- [x] é”™è¯¯å¤„ç†
- [x] é€Ÿç‡é™åˆ¶
- [x] CORS é…ç½®
- [x] å“åº”å¼è®¾è®¡
- [x] æ¨¡æ€å¯¹è¯æ¡†
- [x] Toast æ¶ˆæ¯æç¤º

### ğŸ¨ UI ç‰¹æ€§

- ç¾è§‚çš„æ¨¡æ€å¯¹è¯æ¡†
- å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœ
- åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨
- å®æ—¶è¡¨å•éªŒè¯
- é”™è¯¯å’ŒæˆåŠŸæ¶ˆæ¯
- ç§»åŠ¨ç«¯é€‚é…

## ğŸ”§ API ç«¯ç‚¹

### è®¤è¯ç›¸å…³

#### æ³¨å†Œ
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "user@giip.info",
  "password": "YourPassword123!"
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "User registered successfully",
  "data": {
    "id": 1,
    "email": "user@giip.info",
    "role": "user",
    "created_at": "2025-10-18T06:00:00.000Z"
  }
}
```

#### ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "admin@giip.info",
  "password": "Password123!"
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "Login successful",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 5,
    "email": "admin@giip.info",
    "role": "admin"
  }
}
```

### å—ä¿æŠ¤çš„èµ„æº

ä½¿ç”¨ Token è®¿é—®å—ä¿æŠ¤çš„èµ„æºï¼š

```http
GET /api/news
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æ–¹æ³• 1ï¼šæµè§ˆå™¨æµ‹è¯•

1. **æ‰“å¼€å‰ç«¯**
   ```
   http://localhost
   ```

2. **æµ‹è¯•æ³¨å†Œ**
   - ç‚¹å‡» "Register"
   - å¡«å†™è¡¨å•
   - æäº¤

3. **æµ‹è¯•ç™»å½•**
   - ç‚¹å‡» "Login"
   - ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•
   - éªŒè¯å³ä¸Šè§’æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯

4. **æµ‹è¯•ç™»å‡º**
   - ç‚¹å‡» "Logout"
   - éªŒè¯è¿”å›ç™»å½•/æ³¨å†ŒæŒ‰é’®

### æ–¹æ³• 2ï¼šå‘½ä»¤è¡Œæµ‹è¯•

è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼š

```bash
node test-full-stack-auth.js
```

### æ–¹æ³• 3ï¼šAPI æµ‹è¯•

ä½¿ç”¨ curl æˆ– Postman æµ‹è¯• APIï¼š

```bash
# æ³¨å†Œ
curl -X POST http://localhost:3000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@giip.info","password":"Test123!"}'

# ç™»å½•
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@giip.info","password":"Password123!"}'

# è®¿é—®å—ä¿æŠ¤èµ„æº
curl http://localhost:3000/api/news \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### å¯†ç å®‰å…¨
- âœ… bcrypt å“ˆå¸Œï¼ˆ10 roundsï¼‰
- âœ… æœ€å°é•¿åº¦è¦æ±‚ï¼ˆ6 å­—ç¬¦ï¼‰
- âœ… å¯†ç ç¡®è®¤éªŒè¯

### Token å®‰å…¨
- âœ… JWT ç­¾åéªŒè¯
- âœ… Token è¿‡æœŸæ—¶é—´ï¼ˆ1 å°æ—¶ï¼‰
- âœ… å®‰å…¨çš„ Token å­˜å‚¨ï¼ˆlocalStorageï¼‰

### API å®‰å…¨
- âœ… é€Ÿç‡é™åˆ¶
  - ç™»å½•ï¼š5 æ¬¡/15 åˆ†é’Ÿ
  - æ³¨å†Œï¼š3 æ¬¡/å°æ—¶
  - APIï¼š100 æ¬¡/15 åˆ†é’Ÿ
- âœ… CORS é…ç½®
- âœ… è¾“å…¥éªŒè¯
- âœ… SQL æ³¨å…¥é˜²æŠ¤
- âœ… XSS é˜²æŠ¤

## ğŸ› å¸¸è§é—®é¢˜

### Q: ç‚¹å‡»ç™»å½•/æ³¨å†ŒæŒ‰é’®æ²¡æœ‰ååº”ï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯
2. ç¡®è®¤æ‰€æœ‰æœåŠ¡æ­£åœ¨è¿è¡Œï¼š`docker-compose ps`
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°é¡µé¢
4. ç¡®è®¤ JavaScript æ–‡ä»¶å·²æ­£ç¡®åŠ è½½

### Q: ç™»å½•å¤±è´¥ï¼Œæç¤º"Invalid email or password"ï¼Ÿ

**A:** 
1. ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„æµ‹è¯•è´¦å·ï¼š
   - é‚®ç®±ï¼š`admin@giip.info`
   - å¯†ç ï¼š`Password123!`ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰
2. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æœ‰ç”¨æˆ·æ•°æ®ï¼š
   ```bash
   docker-compose exec db psql -U giip_user -d giip_db -c "SELECT email FROM users;"
   ```

### Q: æç¤º"Too many login attempts"ï¼Ÿ

**A:** è§¦å‘äº†é€Ÿç‡é™åˆ¶ã€‚ç­‰å¾… 15 åˆ†é’Ÿæˆ–é‡å¯åç«¯æœåŠ¡ï¼š
```bash
docker-compose restart api
```

### Q: ç™»å½•ååˆ·æ–°é¡µé¢ï¼Œç™»å½•çŠ¶æ€ä¸¢å¤±ï¼Ÿ

**A:** è¿™ä¸åº”è¯¥å‘ç”Ÿã€‚æ£€æŸ¥ï¼š
1. æµè§ˆå™¨æ˜¯å¦ç¦ç”¨äº† localStorage
2. æ˜¯å¦åœ¨éšç§/æ— ç—•æ¨¡å¼ä¸‹æµè§ˆ
3. æ‰“å¼€å¼€å‘è€…å·¥å…· â†’ Application â†’ Local Storage æŸ¥çœ‹æ˜¯å¦æœ‰ `authToken`

### Q: CORS é”™è¯¯ï¼Ÿ

**A:** 
1. ç¡®è®¤åç«¯ CORS é…ç½®æ­£ç¡®
2. æ£€æŸ¥ `backend/src/config/security.js`
3. é‡å¯åç«¯æœåŠ¡ï¼š`docker-compose restart api`

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚
â”‚ (Frontend)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP/HTTPS
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    Nginx    â”‚
â”‚  (Port 80)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Static Files
       â”‚ (HTML, CSS, JS)
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JavaScript Modules â”‚
â”‚  - auth.js          â”‚
â”‚  - api-client.js    â”‚
â”‚  - data-renderer.js â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Fetch API
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Express API   â”‚
â”‚  (Port 3000)    â”‚
â”‚  - Auth Routes  â”‚
â”‚  - Middleware   â”‚
â”‚  - Controllers  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ SQL Queries
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚
â”‚  (Port 5432)    â”‚
â”‚  - Users        â”‚
â”‚  - Roles        â”‚
â”‚  - Permissions  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ä¸‹ä¸€æ­¥

ç³»ç»Ÿå·²å®Œå…¨æ‰“é€šï¼Œå¯ä»¥ï¼š

1. **å¼€å‘æ–°åŠŸèƒ½**
   - æ·»åŠ ç”¨æˆ·èµ„æ–™é¡µé¢
   - å®ç°å¯†ç é‡ç½®
   - æ·»åŠ ç¤¾äº¤ç™»å½•

2. **å¢å¼ºå®‰å…¨æ€§**
   - å®ç°ä¸¤æ­¥éªŒè¯ï¼ˆ2FAï¼‰
   - æ·»åŠ ç™»å½•å†å²è®°å½•
   - å®ç°ä¼šè¯ç®¡ç†

3. **æ”¹è¿› UI/UX**
   - æ·»åŠ æ›´å¤šåŠ¨ç”»æ•ˆæœ
   - å®ç°ä¸»é¢˜åˆ‡æ¢
   - ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ

4. **åå°ç®¡ç†**
   - åˆ›å»ºç®¡ç†å‘˜é¢æ¿
   - å®ç°ç”¨æˆ·ç®¡ç†
   - æ·»åŠ å†…å®¹ç®¡ç†åŠŸèƒ½

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼š
- ğŸ“§ Email: support@giip.info
- ğŸ“ æ–‡æ¡£: æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•çš„ README.md
- ğŸ› Bug æŠ¥å‘Š: åˆ›å»º GitHub Issue

---

**æœ€åæ›´æ–°**: 2025å¹´10æœˆ18æ—¥  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
