╔══════════════════════════════════════════════════════════════╗
║          Ubuntu 24 构建错误修复                              ║
╚══════════════════════════════════════════════════════════════╝

❌ 错误信息

npm ci command can only install with an existing package-lock.json

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 解决方案

修改 backend/Dockerfile：

之前：
  RUN npm ci --omit=dev

之后：
  RUN npm install --production --no-optional

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🚀 立即部署

方法1（推荐）：
  chmod +x deploy-ubuntu.sh
  ./deploy-ubuntu.sh

方法2（手动）：
  docker-compose down
  docker rmi giipc-web giipc-api
  docker-compose build --no-cache
  docker-compose up -d

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 验证部署

1. 检查容器状态：
   docker-compose ps

2. 查看日志：
   docker logs giip-backend

3. 测试API：
   curl http://localhost:3000/api/health

4. 浏览器测试：
   http://localhost (使用隐私模式)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📚 详细文档

查看完整说明：
  UBUNTU_DEPLOYMENT.md

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

准备好了吗？立即部署！🚀

╚══════════════════════════════════════════════════════════════╝
