# GIIP 系统快速测试指南

## 🎯 测试目标

验证所有核心功能是否正常工作。

## ⏱️ 预计时间

5-10 分钟

## 📋 测试清单

### 1️⃣ 系统启动测试（1分钟）

```bash
# 检查容器状态
docker ps

# 应该看到 3 个容器都在运行：
# - giip-frontend (healthy)
# - giip-backend (healthy)
# - giip-database (healthy)
```

✅ **通过标准**: 所有容器状态为 "Up" 和 "healthy"

---

### 2️⃣ 前端访问测试（1分钟）

1. 打开浏览器访问: http://localhost
2. 检查页面是否正常加载
3. 检查右上角是否显示 "Login" 和 "Register" 按钮

✅ **通过标准**: 
- 页面完整显示
- 无 JavaScript 错误（F12 控制台）
- Login/Register 按钮可见

---

### 3️⃣ 登录功能测试（2分钟）

#### 步骤 1: 打开登录表单
1. 点击右上角 "Login" 按钮
2. 应该弹出登录表单

#### 步骤 2: 输入凭据
```
邮箱: admin@giip.info
密码: admin123
```

#### 步骤 3: 提交登录
1. 点击 "Login" 按钮
2. 等待响应

#### 步骤 4: 验证登录成功
检查以下内容：
- [ ] 登录表单关闭
- [ ] 右上角显示用户头像（字母 "A"）
- [ ] 显示邮箱 "admin@giip.info"
- [ ] 显示下拉箭头 ▼

✅ **通过标准**: 所有检查项都通过

---

### 4️⃣ 用户菜单测试（1分钟）

#### 步骤 1: 打开下拉菜单
1. 点击用户头像
2. 应该显示下拉菜单

#### 步骤 2: 检查菜单内容
下拉菜单应该包含：
- [ ] "Signed in as"
- [ ] 邮箱地址
- [ ] 角色标签 "(Admin)"
- [ ] "Admin Dashboard" 链接
- [ ] "Logout" 按钮

#### 步骤 3: 测试关闭菜单
1. 点击页面其他地方
2. 下拉菜单应该自动关闭

✅ **通过标准**: 菜单正确显示和关闭

---

### 5️⃣ 管理后台测试（1分钟）

#### 步骤 1: 访问管理后台
1. 点击用户头像打开菜单
2. 点击 "Admin Dashboard"
3. 应该跳转到管理后台页面

#### 步骤 2: 检查管理功能
管理后台应该显示：
- [ ] 统计卡片（News, Events, Conferences, Users）
- [ ] 管理选项卡（News, Events, Conferences, Users）
- [ ] 数据表格

✅ **通过标准**: 管理后台正常显示

---

### 6️⃣ 登出功能测试（1分钟）

#### 步骤 1: 执行登出
1. 点击用户头像
2. 点击 "Logout" 按钮

#### 步骤 2: 验证登出成功
检查以下内容：
- [ ] 用户头像消失
- [ ] 右上角重新显示 "Login" 和 "Register" 按钮
- [ ] 如果在管理后台，应该跳转回首页

✅ **通过标准**: 成功返回未登录状态

---

### 7️⃣ 移动端测试（2分钟）

#### 步骤 1: 切换到移动视图
1. 按 F12 打开开发者工具
2. 按 Ctrl+Shift+M 切换到移动视图
3. 选择设备: iPhone 12 Pro (390px)

#### 步骤 2: 测试移动菜单
1. 点击右上角汉堡菜单 ☰
2. 检查菜单是否从左侧滑入
3. 检查是否显示半透明遮罩

#### 步骤 3: 检查菜单内容
移动菜单应该包含：
- [ ] Home
- [ ] News
- [ ] Upcoming Events
- [ ] Past Conferences
- [ ] Highlights
- [ ] About Us
- [ ] Contact Us
- [ ] Login 按钮
- [ ] Register 按钮

#### 步骤 4: 测试关闭菜单
1. 点击遮罩层
2. 菜单应该滑出并关闭

#### 步骤 5: 测试移动端登录
1. 打开移动菜单
2. 点击 "Login"
3. 输入凭据并登录
4. 重新打开移动菜单
5. 应该显示用户信息和 Logout 按钮

✅ **通过标准**: 移动端所有功能正常

---

### 8️⃣ 页面导航测试（1分钟）

#### 测试所有页面
访问以下页面并检查：

1. **首页** (http://localhost)
   - [ ] 页面正常加载
   - [ ] 用户菜单正常工作

2. **关于页面** (http://localhost/about.html)
   - [ ] 页面正常加载
   - [ ] 用户菜单正常工作
   - [ ] 移动菜单正常工作

3. **联系页面** (http://localhost/contact.html)
   - [ ] 页面正常加载
   - [ ] 用户菜单正常工作
   - [ ] 移动菜单正常工作

✅ **通过标准**: 所有页面功能一致

---

### 9️⃣ API 测试（1分钟）

#### 测试后端 API

```bash
# 1. 健康检查
curl http://localhost:3000/api/health

# 应该返回:
# {"status":"ok","timestamp":"...","service":"GIIP Backend API",...}

# 2. 获取新闻列表
curl http://localhost:3000/api/news

# 应该返回新闻数组

# 3. 获取活动列表
curl http://localhost:3000/api/events

# 应该返回活动数组
```

✅ **通过标准**: 所有 API 返回正确的 JSON 数据

---

### 🔟 浏览器控制台测试（1分钟）

#### 在浏览器控制台运行

```javascript
// 1. 检查 authManager
console.log('AuthManager:', window.authManager);
// 应该输出: AuthManager 对象

// 2. 检查登录状态（登录后）
console.log('Is authenticated:', window.authManager?.isAuthenticated());
// 应该输出: true

// 3. 检查用户信息
console.log('User:', window.authManager?.user);
// 应该输出: {email: "admin@giip.info", role: "admin", ...}

// 4. 手动更新 UI
window.authManager?.updateAuthUI();
// 应该更新用户界面
```

✅ **通过标准**: 所有命令正常执行，无错误

---

## 📊 测试结果汇总

### 测试通过标准

所有以下项目都应该 ✅ 通过：

- [ ] 1. 系统启动测试
- [ ] 2. 前端访问测试
- [ ] 3. 登录功能测试
- [ ] 4. 用户菜单测试
- [ ] 5. 管理后台测试
- [ ] 6. 登出功能测试
- [ ] 7. 移动端测试
- [ ] 8. 页面导航测试
- [ ] 9. API 测试
- [ ] 10. 浏览器控制台测试

### 如果测试失败

#### 常见问题和解决方法

**问题 1: 容器未运行**
```bash
docker-compose up -d
```

**问题 2: 页面无法访问**
```bash
# 检查端口占用
netstat -ano | findstr :80
netstat -ano | findstr :3000

# 重启容器
docker-compose restart
```

**问题 3: 登录失败**
```bash
# 检查后端日志
docker logs -f giip-backend

# 检查数据库
docker exec -it giip-database psql -U giip_user -d giip_db -c "SELECT * FROM users WHERE email='admin@giip.info';"
```

**问题 4: 用户菜单不显示**
```bash
# 强制刷新浏览器
Ctrl + Shift + R

# 清除浏览器缓存
F12 → Application → Clear storage → Clear site data
```

**问题 5: 移动菜单不工作**
```bash
# 检查 common.js 是否加载
# 在浏览器控制台查看 Network 标签
```

---

## 🎯 快速验证脚本

### Windows 批处理脚本

创建 `quick-test.bat`:

```batch
@echo off
echo ========================================
echo GIIP 系统快速测试
echo ========================================
echo.

echo 1. 检查 Docker 容器...
docker ps --format "table {{.Names}}\t{{.Status}}"
echo.

echo 2. 测试前端...
curl -s -o nul -w "前端状态码: %%{http_code}\n" http://localhost
echo.

echo 3. 测试后端 API...
curl -s http://localhost:3000/api/health
echo.
echo.

echo 4. 测试数据库连接...
docker exec giip-database psql -U giip_user -d giip_db -c "SELECT COUNT(*) FROM users;" 2>nul
echo.

echo ========================================
echo 测试完成！
echo ========================================
echo.
echo 请在浏览器中手动测试：
echo 1. 访问 http://localhost
echo 2. 登录 (admin@giip.info / admin123)
echo 3. 测试用户菜单
echo 4. 测试移动端菜单
echo.
pause
```

### 运行测试

```bash
quick-test.bat
```

---

## 📝 测试报告模板

### 测试日期: ___________
### 测试人员: ___________

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 系统启动 | ⬜ 通过 / ⬜ 失败 | |
| 前端访问 | ⬜ 通过 / ⬜ 失败 | |
| 登录功能 | ⬜ 通过 / ⬜ 失败 | |
| 用户菜单 | ⬜ 通过 / ⬜ 失败 | |
| 管理后台 | ⬜ 通过 / ⬜ 失败 | |
| 登出功能 | ⬜ 通过 / ⬜ 失败 | |
| 移动端 | ⬜ 通过 / ⬜ 失败 | |
| 页面导航 | ⬜ 通过 / ⬜ 失败 | |
| API 测试 | ⬜ 通过 / ⬜ 失败 | |
| 控制台测试 | ⬜ 通过 / ⬜ 失败 | |

### 总体评价: ⬜ 通过 / ⬜ 失败

### 发现的问题:
1. 
2. 
3. 

### 建议:
1. 
2. 
3. 

---

## 🎉 测试完成

如果所有测试都通过，恭喜！系统已经可以投入使用了。

如果有测试失败，请参考上面的"常见问题和解决方法"部分，或查看相关文档：
- `当前状态总结.md` - 系统概览
- `AUTHENTICATION_GUIDE.md` - 认证指南
- `DEPLOYMENT.md` - 部署指南
- `README.md` - 项目文档

---

**版本**: 1.0.0  
**最后更新**: 2025-10-20
